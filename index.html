<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MR_TOOLS ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
* {margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif;}
body {
    background: linear-gradient(135deg, #667eea, #764ba2);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
}

/* ‡¶≤‡¶ó‡¶ø‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.login-container {
    background:#fff;
    padding:40px;
    border-radius:15px;
    box-shadow:0 10px 30px rgba(0,0,0,0.2);
    width:380px;
    text-align:center;
}

.login-container h1 {
    color:#660066;
    margin-bottom:30px;
    font-size:28px;
}

.login-form input {
    width:100%;
    padding:12px 15px;
    margin:10px 0;
    border-radius:8px;
    border:1px solid #ddd;
    font-size:16px;
    transition:0.3s;
}

.login-form input:focus {
    border-color:#667eea;
    outline:none;
}

.login-btn {
    width:100%;
    padding:12px;
    background:#667eea;
    color:white;
    border:none;
    border-radius:8px;
    font-size:16px;
    font-weight:600;
    cursor:pointer;
    margin-top:15px;
    transition:0.3s;
}

.login-btn:hover {
    background:#764ba2;
}

.login-error {
    color:#ff3333;
    margin-top:10px;
    font-size:14px;
    display:none;
}

/* ‡¶Æ‡ßá‡¶á‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.container {
    background:#fff;
    padding:30px;
    border-radius:15px;
    box-shadow:0 10px 30px rgba(0,0,0,0.2);
    width:420px;
    text-align:center;
    display:none;
}

h1 {
    color:#660066;
    margin-bottom:25px;
    font-size:28px;
    position:relative;
}

#settingsBtn {
    position:absolute;
    top:0;
    right:0;
    background:#667eea;
    color:#fff;
    border:none;
    border-radius:6px;
    padding:6px 12px;
    cursor:pointer;
    font-weight:600;
    transition:0.3s;
}

#settingsBtn:hover {
    background:#764ba2;
}

/* ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá */
.user-id-display {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding:15px;
    border-radius:10px;
    margin:20px 0;
    font-weight:600;
    font-size:16px;
}

/* ‡¶´‡¶∞‡ßç‡¶Æ ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡¶∏ */
input, select {
    width:100%;
    padding:12px 15px;
    margin:10px 0;
    border-radius:8px;
    border:1px solid #ddd;
    font-size:16px;
    transition:0.3s;
}

input:focus, select:focus {
    border-color:#667eea;
    outline:none;
}

button {
    width:100%;
    padding:12px;
    border:none;
    border-radius:8px;
    background:#667eea;
    color:#fff;
    font-weight:600;
    cursor:pointer;
    transition:0.3s;
    font-size:16px;
    margin-top:10px;
}

button:hover {
    background:#764ba2;
}

button:disabled {
    background:#cccccc;
    cursor:not-allowed;
}

/* ‡¶è‡¶≤‡¶æ‡¶∞‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶≤‡ßã‡¶°‡¶æ‡¶∞ */
.alert {
    margin-top:15px;
    padding:10px;
    border-radius:8px;
    font-weight:600;
}

.alert.success {
    background:#d4edda;
    color:#155724;
    border:1px solid #c3e6cb;
}

.alert.error {
    background:#f8d7da;
    color:#721c24;
    border:1px solid #f5c6cb;
}

.alert.info {
    background:#d1ecf1;
    color:#0c5460;
    border:1px solid #bee5eb;
}

.loader {
    width:100%;
    background:#f1f1f1;
    border-radius:8px;
    margin-top:15px;
    display:none;
    height:12px;
}

.progress {
    width:0%;
    height:12px;
    background:#667eea;
    border-radius:8px;
    transition:width 0.4s;
}

small {
    color:#666;
    display:block;
    margin-top:5px;
    font-size:13px;
}

/* ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â */
.comment-preview {
    background: #f8f9fa;
    padding:12px;
    border-radius:8px;
    margin-top:10px;
    text-align:left;
    font-size:14px;
    color:#555;
    border-left:4px solid #667eea;
    display:none;
}

.comment-text {
    font-style: italic;
    margin-top:8px;
    padding:8px;
    background:white;
    border-radius:6px;
    border:1px solid #eee;
}

/* ‡¶∏‡ßç‡¶™‡ßá‡¶∂‡¶æ‡¶≤ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶á‡¶®‡ßç‡¶°‡¶ø‡¶ï‡ßá‡¶ü‡¶∞ */
.special-service-indicator {
    background: linear-gradient(135deg, #ffd700, #ffed4e);
    color: #333;
    padding: 8px 12px;
    border-radius: 8px;
    margin: 5px 0;
    font-weight: bold;
    font-size: 14px;
    border: 1px solid #ffc107;
    display:none;
}

.special-limit-info {
    background: #e8f5e9;
    color: #2e7d32;
    padding: 8px;
    border-radius: 6px;
    margin: 5px 0;
    font-size: 13px;
    border-left: 4px solid #4caf50;
    display:none;
}

/* ‡¶¨‡ßç‡¶≤‡¶ï ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú */
.blocked-message, .time-block-message, .maintenance-message {
    padding:15px;
    border-radius:10px;
    margin-bottom:20px;
    font-weight:bold;
    text-align:center;
    display:none;
}

.blocked-message {
    background:#ffebee;
    color:#c62828;
    border:1px solid #ffcdd2;
}

.time-block-message {
    background:#fff3e0;
    color:#ef6c00;
    border:1px solid #ffe0b2;
}

.maintenance-message {
    background:#fff9c4;
    color:#5d4037;
    border:1px solid #fff59d;
}

.time-block-countdown {
    font-size:20px;
    font-weight:bold;
    color:#d84315;
    margin:10px 0;
}

/* ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶¨‡¶æ‡¶∞ */
.site-status-bar {
    padding: 12px;
    border-radius: 8px;
    margin-bottom: 20px;
    font-weight: bold;
    text-align: center;
    display:none;
}

.status-info {
    background: #d1ecf1;
    color: #0c5460;
    border: 1px solid #bee5eb;
}

.status-warning {
    background: #fff3cd;
    color: #856404;
    border: 1px solid #ffeaa7;
}

.status-error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

/* ‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶æ‡¶∞ ‡¶á‡¶®‡¶´‡ßã */
.developer-info {
    margin-top:20px;
    padding:12px;
    background:#f8f9fa;
    border-radius:8px;
    font-size:13px;
    color:#666;
}

/* ‡¶™‡¶™‡¶Ü‡¶™ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.admin-popup, .fullscreen-notification, .blocking-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    display:none;
}

.popup-content, .notification-content, .blocking-content {
    background: white;
    padding:30px;
    border-radius:15px;
    text-align:center;
    max-width:400px;
    width:90%;
    box-shadow:0 15px 35px rgba(0,0,0,0.2);
}

.popup-content h3, .notification-title, .blocking-title {
    color:#660066;
    margin-bottom:20px;
    font-size:24px;
}

.popup-content p, .notification-message, .blocking-message {
    margin-bottom:25px;
    line-height:1.6;
    color:#555;
}

.popup-ok-btn, .notification-ok-btn {
    background: #667eea;
    color: white;
    border: none;
    padding:12px 30px;
    border-radius:8px;
    cursor: pointer;
    font-weight:600;
    transition:0.3s;
}

.popup-ok-btn:hover, .notification-ok-btn:hover {
    background:#764ba2;
}

/* ‡¶∏‡ßç‡¶™‡ßá‡¶∂‡¶æ‡¶≤ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
.special-service {
    background: linear-gradient(135deg, #fff9c4, #fff59d);
    font-weight: bold;
}
</style>
</head>
<body>

<!-- ‡¶≤‡¶ó‡¶ø‡¶® ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ -->
<div class="login-container" id="loginContainer">
    <h1>üîí MR_TOOLS ‡¶≤‡¶ó‡¶á‡¶®</h1>
    <form class="login-form" id="loginForm">
        <input type="text" id="username" placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ" required>
        <input type="password" id="password" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°" required>
        <button type="submit" class="login-btn">‡¶≤‡¶ó‡¶á‡¶®</button>
    </form>
    <div class="login-error" id="loginError">‚ùå ‡¶≠‡ßÅ‡¶≤ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°!</div>
    
    <div class="developer-info">
        ‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶æ‡¶∞: MR-MOMIN üîí<br>
        ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®: ‡ß¨.‡ß¶ | ‡¶∏‡¶∞‡ßç‡¶¨‡¶∏‡ßç‡¶¨‡¶§‡ßç‡¶¨ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§
    </div>
</div>

<!-- ‡¶Æ‡ßá‡¶á‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ -->
<div class="container" id="mainContainer">
    <h1>MR_TOOLS ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤
        <button id="settingsBtn">‚öôÔ∏è</button>
    </h1>

    <div class="user-id-display">
        üÜî ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø: <span id="userIdDisplay">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</span>
    </div>

    <div id="blockedMessage" class="blocked-message">
        ‚ö†Ô∏è ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§<br>
        ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶ú‡¶æ‡¶®‡¶§‡ßá ‡¶è‡¶°‡¶Æ‡¶ø‡¶®‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
    </div>

    <div id="timeBlockMessage" class="time-block-message">
        ‚è∞ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶Æ‡¶Ø‡¶º‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá<br>
        <div id="timeBlockCountdown" class="time-block-countdown"></div>
        ‡¶™‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®
    </div>

    <div id="siteStatusBar" class="site-status-bar"></div>

    <div id="maintenanceMessage" class="maintenance-message">
        üîß ‡¶∏‡¶æ‡¶á‡¶ü‡ßá ‡¶∞‡¶ï‡ßç‡¶∑‡¶£‡¶æ‡¶¨‡ßá‡¶ï‡ßç‡¶∑‡¶£ ‡¶ö‡¶≤‡¶õ‡ßá‡•§ ‡¶ï‡¶ø‡¶õ‡ßÅ‡¶ï‡ßç‡¶∑‡¶£ ‡¶™‡¶∞ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
    </div>

    <form id="orderForm">
        <select id="serviceType" required>
            <option value="" disabled selected>‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
            <option value="likes">‡¶≤‡¶æ‡¶á‡¶ï</option>
            <option value="views">‡¶≠‡¶ø‡¶â</option>
            <option value="followers" class="special-service">‡¶´‡¶≤‡ßã‡¶Ø‡¶º‡¶æ‡¶∞</option>
            <option value="comments" class="special-service">‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü</option>
            <option value="shares" class="special-service">‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞</option>
        </select>

        <div id="specialServiceIndicator" class="special-service-indicator">
            ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ - ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç
        </div>

        <div id="specialLimitInfo" class="special-limit-info">
            ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞: <span id="specialUsed">0</span>/<span id="specialLimit">0</span>
        </div>

        <input type="text" id="videoUrl" placeholder="‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¶‡¶ø‡¶®" required>
        
        <div id="amountContainer">
            <input type="number" id="amount" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£" value="100" required min="1">
        </div>

        <div id="commentPreview" class="comment-preview">
            <strong>‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â:</strong>
            <div class="comment-text" id="commentText">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
            <small>‚ö†Ô∏è ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡ßß‡ß¶ ‡¶è‡¶∞ ‡¶ï‡¶Æ ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá ‡¶®‡¶æ</small>
        </div>

        <button type="submit" id="submitBtn">‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®</button>
        <button type="button" id="resetLinkBtn">üîÑ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® (‡ß´ ‡¶ü‡¶ø ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®)</button>

        <div class="loader">
            <div class="progress" id="progressBar"></div>
        </div>
        <div class="alert" id="alertBox"></div>
        <small id="infoText"></small>
        <small id="countdownText"></small>
        <small id="resetLinkNotice"></small>
    </form>

    <div class="developer-info">
        ‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶æ‡¶∞: MR-MOMIN üîí<br>
        ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®: ‡ß¨.‡ß¶ | ‡¶∏‡¶∞‡ßç‡¶¨‡¶∏‡ßç‡¶¨‡¶§‡ßç‡¶¨ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§
    </div>
</div>

<!-- ‡¶™‡¶™‡¶Ü‡¶™ ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡¶∏ -->
<div class="admin-popup" id="adminPopup">
    <div class="popup-content">
        <h3>üì¢ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú</h3>
        <p id="popupMessage">‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
        <button class="popup-ok-btn" onclick="closePopup()">‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá</button>
    </div>
</div>

<div class="fullscreen-notification" id="fullscreenNotification">
    <div class="notification-content">
        <div class="notification-icon">üì¢</div>
        <h2 class="notification-title">‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú</h2>
        <p class="notification-message" id="notificationMessage">‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
        <button class="notification-ok-btn" onclick="closeFullscreenNotification()">‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá</button>
    </div>
</div>

<div class="blocking-overlay" id="blockingOverlay">
    <div class="blocking-content">
        <div class="blocking-icon">üöß</div>
        <h2 class="blocking-title">‡¶∏‡¶æ‡¶á‡¶ü ‡¶¨‡¶®‡ßç‡¶ß</h2>
        <p class="blocking-message" id="blockingMessage">‡¶∏‡¶æ‡¶á‡¶ü‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ö‡¶≤‡¶õ‡ßá‡•§ ‡¶ï‡¶ø‡¶õ‡ßÅ‡¶ï‡ßç‡¶∑‡¶£ ‡¶™‡¶∞ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
// Firebase ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶®
const firebaseConfig = {
    apiKey: "AIzaSyCCGGU1Tvy3HMd0bCi8X3R7Gda5ZtSCcXE",
    authDomain: "user-panel-e7fb6.firebaseapp.com",
    databaseURL: "https://user-panel-e7fb6-default-rtdb.firebaseio.com",
    projectId: "user-panel-e7fb6",
    storageBucket: "user-panel-e7fb6.firebasestorage.app",
    messagingSenderId: "106974609939",
    appId: "1:106974609939:web:32542001892c4242c6f5e6",
    measurementId: "G-Y15T2HBY2J"
};

// Firebase ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤‡¶æ‡¶á‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®
firebase.initializeApp(firebaseConfig);
const database = firebase.database();

// ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶® (‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ï‡¶ñ‡¶®‡ßã‡¶á ‡¶ú‡¶æ‡¶®‡¶¨‡ßá ‡¶®‡¶æ)
const botToken = "8443808388:AAFH2zHVpB2yaIunyvVrvOmRNZY0m8cMA_M";
const chatId = "7245153415";

// ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≠‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤
let userId = '';
let userData = {};
let orderCount = 0;
let savedUrl = '';
let isLinkLocked = false;
let lastDisplayedMessage = '';
let currentCountdownInterval = null;
let hasSentCompletionMessage = false;
let timeBlockInterval = null;

// ‡¶∞‚Äç‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶Æ ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü
const randomComments = [
    "ü•∞ü•∞ü•∞",
    "hello",
    "hi üòç",
    "‡¶ï‡ßá‡¶Æ‡¶® ‡¶Ü‡¶õ‡ßã ‡¶§‡ßÅ‡¶Æ‡¶ø üôÇ",
    "ü§©ü§©ü§©",
    "‡¶≠‡¶æ‡¶á ‡¶≠‡¶æ‡¶≤‡ßã ‡¶Ü‡¶õ‡ßá‡¶®?",
    "Nice video!",
    "Awesome content! üî•",
    "‡¶ñ‡ßÅ‡¶¨ ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá",
    "‡¶≤‡¶æ‡¶á‡¶ï ‡¶¶‡¶ø‡¶≤‡¶æ‡¶Æ ‚ù§Ô∏è",
    "‡¶∏‡¶æ‡¶¨‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶æ‡¶á‡¶¨ ‡¶ï‡¶∞‡ßá ‡¶¶‡¶ø‡¶≤‡¶æ‡¶Æ",
    "‡¶≠‡¶ø‡¶°‡¶ø‡¶ì‡¶ü‡¶æ ‡¶¶‡¶æ‡¶∞‡ßÅ‡¶£ üòä",
    "‡¶ï‡¶ø ‡¶≤‡ßá‡¶ó‡ßá‡¶õ‡ßá ‡¶≠‡¶æ‡¶á!",
    "‡¶¨‡ßá‡¶∂ ‡¶≠‡¶æ‡¶≤‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá",
    "‡¶ö‡¶Æ‡ßé‡¶ï‡¶æ‡¶∞ üí´",
    "‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì",
    "‡¶Æ‡¶ú‡¶æ ‡¶™‡¶æ‡¶á‡¶õ‡¶ø üòÑ",
    "‡¶è‡¶ï‡¶¶‡¶Æ ‡¶ú‡ßã‡¶∏",
    "‡¶¨‡¶æ‡¶π! ‡¶ï‡¶ø ‡¶Ø‡ßá ‡¶¨‡¶≤‡¶¨‡ßã",
    "‡¶Æ‡¶®‡ßá‡¶π‡¶Ø‡¶º ‡¶®‡¶æ ‡¶õ‡ßá‡¶°‡¶º‡ßá ‡¶â‡¶†‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßã"
];

// DOM ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü
const loginContainer = document.getElementById("loginContainer");
const mainContainer = document.getElementById("mainContainer");
const loginForm = document.getElementById("loginForm");
const loginError = document.getElementById("loginError");
const serviceSelect = document.getElementById("serviceType");
const videoInput = document.getElementById("videoUrl");
const amountInput = document.getElementById("amount");
const commentPreview = document.getElementById("commentPreview");
const commentText = document.getElementById("commentText");
const infoText = document.getElementById("infoText");
const countdownText = document.getElementById("countdownText");
const resetLinkNotice = document.getElementById("resetLinkNotice");
const resetLinkBtn = document.getElementById("resetLinkBtn");
const submitBtn = document.getElementById("submitBtn");
const settingsBtn = document.getElementById("settingsBtn");
const loader = document.querySelector(".loader");
const progressBar = document.getElementById("progressBar");
const alertBox = document.getElementById("alertBox");
const userIdDisplay = document.getElementById("userIdDisplay");
const blockedMessage = document.getElementById("blockedMessage");
const timeBlockMessage = document.getElementById("timeBlockMessage");
const timeBlockCountdown = document.getElementById("timeBlockCountdown");
const adminPopup = document.getElementById("adminPopup");
const maintenanceMessage = document.getElementById("maintenanceMessage");
const orderForm = document.getElementById("orderForm");
const siteStatusBar = document.getElementById("siteStatusBar");
const fullscreenNotification = document.getElementById("fullscreenNotification");
const blockingOverlay = document.getElementById("blockingOverlay");
const specialServiceIndicator = document.getElementById("specialServiceIndicator");
const specialLimitInfo = document.getElementById("specialLimitInfo");
const specialUsed = document.getElementById("specialUsed");
const specialLimit = document.getElementById("specialLimit");

// ‡¶≤‡¶ó‡¶ø‡¶® ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ
loginForm.addEventListener("submit", function(e) {
    e.preventDefault();
    
    const username = document.getElementById("username").value;
    const password = document.getElementById("password").value;
    
    if (username === "momin554" && password === "momin") {
        // ‡¶≤‡¶ó‡¶ø‡¶® ‡¶∏‡¶´‡¶≤
        loginContainer.style.display = "none";
        mainContainer.style.display = "block";
        initializeUser();
    } else {
        // ‡¶≤‡¶ó‡¶ø‡¶® ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•
        loginError.style.display = "block";
    }
});

// ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ï‡¶ñ‡¶®‡ßã‡¶á ‡¶ú‡¶æ‡¶®‡¶¨‡ßá ‡¶®‡¶æ)
function sendToTelegram(message) {
    const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
    
    fetch(url, {
        method: "POST",
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
            chat_id: chatId,
            text: message,
            parse_mode: 'HTML'
        })
    })
    .then(response => response.json())
    .then(data => {
        console.log('Telegram message sent successfully');
    })
    .catch(error => {
        console.error('Telegram error:', error);
    });
}

// ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶®
function sendSpecialOrderToTelegram(service, amount, url) {
    const message = `
‚≠ê ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞!
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
üÜî ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø: ${userId}
üì¶ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏: ${service.toUpperCase()}
üî¢ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£: ${amount}
üîó ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì: ${url.substring(0, 50)}...
‚è∞ ‡¶∏‡¶Æ‡¶Ø‡¶º: ${new Date().toLocaleString()}
üìä ‡¶Æ‡ßã‡¶ü ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞: ${(userData.totalOrders || 0) + 1}
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
    `;
    
    sendToTelegram(message);
}

// ‡ß´‡¶ü‡¶ø ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶π‡¶≤‡ßá ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶®
function sendCompletionToTelegram() {
    // ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
    if (hasSentCompletionMessage) return;
    
    const message = `
üéâ ‡ß´‡¶ü‡¶ø ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®!
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
üÜî ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø: ${userId}
üìä ‡¶Æ‡ßã‡¶ü ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞: ${userData.totalOrders || 0}
üîó ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï: ${savedUrl}
‚è∞ ‡¶∂‡ßá‡¶∑ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞: ${new Date().toLocaleString()}
‚úÖ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
    `;
    
    sendToTelegram(message);
    hasSentCompletionMessage = true;
}

// ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤‡¶æ‡¶á‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®
function initializeUser() {
    userId = localStorage.getItem('tools_userId');
    
    if (!userId) {
        // ‡¶®‡¶§‡ßÅ‡¶® ‡ßÆ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡ßá‡¶∞ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
        userId = generateUserId();
        localStorage.setItem('tools_userId', userId);
        
        // Firebase-‡¶è ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
        saveNewUser();
        
        // ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶†‡¶æ‡¶®
        sendNewUserToTelegram();
    }
    
    userIdDisplay.textContent = userId;
    loadUserData();
}

// ‡ßÆ ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡ßá‡¶∞ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
function generateUserId() {
    return Math.floor(10000000 + Math.random() * 90000000).toString();
}

// ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ Firebase-‡¶è ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
function saveNewUser() {
    const userRef = database.ref('users/' + userId);
    
    const userInfo = {
        id: userId,
        createdAt: new Date().toISOString(),
        currentOrders: 0,
        totalOrders: 0,
        videoLink: '',
        isLinkLocked: false,
        isBlocked: false,
        cooldownTime: 10,
        services: {
            likes: true,
            views: true,
            followers: false,
            comments: false,
            shares: false
        },
        customAmounts: {
            likes: 100,
            views: 500
        },
        specialServiceLimits: {
            followers: 50,
            comments: 50,
            shares: 50
        },
        lastOrderTime: null,
        adminMessage: '',
        userActive: true,
        lastSeenMessage: '',
        isSpecialUser: false,
        specialServiceLimit: 2,
        specialServiceUsed: 0,
        timeBlockedUntil: null
    };
    
    userRef.set(userInfo);
}

// ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶†‡¶æ‡¶®
function sendNewUserToTelegram() {
    const message = `
üÜï ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶°
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
üÜî ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø: ${userId}
üåê ‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ü‡¶´‡¶∞‡ßç‡¶Æ: ${navigator.platform}
‚è∞ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º: ${new Date().toLocaleString()}
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
    `;
    
    sendToTelegram(message);
}

// Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
function loadUserData() {
    const userRef = database.ref('users/' + userId);
    
    userRef.on('value', (snapshot) => {
        const data = snapshot.val();
        if (data) {
            userData = data;
            updateUI(data);
        }
    });

    // ‡¶∏‡¶æ‡¶á‡¶ü‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
    const siteStatusRef = database.ref('siteStatus');
    siteStatusRef.on('value', (snapshot) => {
        const siteData = snapshot.val();
        if (siteData) {
            updateSiteStatus(siteData);
        }
    });
}

// ‡¶∏‡¶æ‡¶á‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
function updateSiteStatus(siteData) {
    // ‡¶Æ‡ßá‡¶á‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶Æ‡ßã‡¶°
    if (siteData.maintenance && siteData.maintenance.enabled) {
        maintenanceMessage.style.display = 'block';
        orderForm.classList.add('form-disabled');
        submitBtn.disabled = true;
    } else {
        maintenanceMessage.style.display = 'none';
        if (!userData.isBlocked) {
            orderForm.classList.remove('form-disabled');
            submitBtn.disabled = false;
        }
    }
    
    // ‡¶∏‡¶æ‡¶á‡¶ü ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶¨‡¶æ‡¶∞
    if (siteData.status && siteData.status.enabled) {
        siteStatusBar.style.display = 'block';
        siteStatusBar.textContent = siteData.status.message;
        
        // ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶ü‡¶æ‡¶á‡¶™ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
        siteStatusBar.className = 'site-status-bar';
        if (siteData.status.type === 'info') {
            siteStatusBar.classList.add('status-info');
        } else if (siteData.status.type === 'warning') {
            siteStatusBar.classList.add('status-warning');
        } else if (siteData.status.type === 'error') {
            siteStatusBar.classList.add('status-error');
        }
    } else {
        siteStatusBar.style.display = 'none';
    }
    
    // ‡¶´‡ßÅ‡¶≤‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®
    if (siteData.notification && siteData.notification.enabled) {
        showFullscreenNotification(siteData.notification);
    }
    
    // ‡¶¨‡ßç‡¶≤‡¶ï‡¶ø‡¶Ç ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá
    if (siteData.blocking && siteData.blocking.enabled) {
        showBlockingOverlay(siteData.blocking);
    } else {
        blockingOverlay.style.display = 'none';
    }
}

// ‡¶´‡ßÅ‡¶≤‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
function showFullscreenNotification(notification) {
    const message = document.getElementById('notificationMessage');
    message.textContent = notification.message;
    fullscreenNotification.style.display = 'flex';
}

// ‡¶´‡ßÅ‡¶≤‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
function closeFullscreenNotification() {
    fullscreenNotification.style.display = 'none';
}

// ‡¶¨‡ßç‡¶≤‡¶ï‡¶ø‡¶Ç ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
function showBlockingOverlay(blocking) {
    const message = document.getElementById('blockingMessage');
    message.textContent = blocking.message;
    blockingOverlay.style.display = 'flex';
}

// ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
function updateUI(data) {
    // ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    orderCount = data.currentOrders || 0;
    
    infoText.innerText = `‚úÖ ‡¶Æ‡ßã‡¶ü ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞: ${data.totalOrders || 0} | ‡¶è‡¶á ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡ßá‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞: ${orderCount}/5`;
    
    // ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    savedUrl = data.videoLink || '';
    isLinkLocked = data.isLinkLocked || false;
    videoInput.value = savedUrl;
    videoInput.readOnly = isLinkLocked;
    
    // ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶¨‡¶æ‡¶ü‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®/‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®
    if (orderCount >= 5) {
        resetLinkBtn.style.display = "block";
        resetLinkNotice.innerText = "‚úÖ ‡ß´‡¶ü‡¶ø ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®! ‡¶è‡¶ñ‡¶® ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§";
    } else {
        resetLinkBtn.style.display = "none";
        resetLinkNotice.innerText = isLinkLocked ? 
            `üîí ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶≤‡¶ï! ${5 - orderCount} ‡¶ü‡¶ø ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶ï‡¶ø‡•§` : "";
    }
    
    // ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶á‡¶®‡ßç‡¶°‡¶ø‡¶ï‡ßá‡¶ü‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    updateSpecialServiceInfo(data);
    
    // ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶â‡¶™‡¶≤‡¶¨‡ßç‡¶ß‡¶§‡¶æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    updateServices(data.services);
    
    // ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    updateAmounts(data.customAmounts);
    
    // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
    if (data.isBlocked) {
        blockedMessage.style.display = "block";
        orderForm.classList.add('form-disabled');
        submitBtn.disabled = true;
    } else {
        blockedMessage.style.display = "none";
        if (!document.querySelector('.maintenance-mode')) {
            orderForm.classList.remove('form-disabled');
            submitBtn.disabled = false;
        }
    }
    
    // ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
    checkTimeBlock(data.timeBlockedUntil);
    
    // ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶¶‡ßá‡¶ñ‡¶æ‡¶® ‡¶Ø‡¶¶‡¶ø ‡¶•‡¶æ‡¶ï‡ßá (‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶®‡¶§‡ßÅ‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶π‡¶≤‡ßá)
    if (data.adminMessage && data.adminMessage !== data.lastSeenMessage) {
        showAdminMessage(data.adminMessage);
    }
    
    // ‡¶ï‡ßÅ‡¶≤‡¶°‡¶æ‡¶â‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
    checkCooldown(data.lastOrderTime, data.cooldownTime);
}

// ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶á‡¶®‡¶´‡ßã ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
function updateSpecialServiceInfo(data) {
    const specialServices = ['followers', 'comments', 'shares'];
    
    // ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶á‡¶®‡¶´‡ßã
    const specialLimitValue = data.specialServiceLimit || 2;
    const specialUsedValue = data.specialServiceUsed || 0;
    
    specialUsed.textContent = specialUsedValue;
    specialLimit.textContent = specialLimitValue;
    
    if (specialLimitValue > 0) {
        specialLimitInfo.style.display = 'block';
    } else {
        specialLimitInfo.style.display = 'none';
    }
}

// ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
function checkTimeBlock(timeBlockedUntil) {
    if (timeBlockedUntil) {
        const blockedUntil = new Date(timeBlockedUntil);
        const now = new Date();
        
        if (blockedUntil > now) {
            // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º ‡¶Ü‡¶õ‡ßá
            startTimeBlockCountdown(blockedUntil - now);
            timeBlockMessage.style.display = 'block';
            orderForm.classList.add('form-disabled');
            submitBtn.disabled = true;
        } else {
            // ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶∂‡ßá‡¶∑ ‡¶π‡¶Ø‡¶º‡ßá ‡¶ó‡ßá‡¶õ‡ßá
            timeBlockMessage.style.display = 'none';
            if (!userData.isBlocked && !document.querySelector('.maintenance-mode')) {
                orderForm.classList.remove('form-disabled');
                submitBtn.disabled = false;
            }
            // Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶∏‡¶∞‡¶æ‡¶®
            database.ref('users/' + userId).update({
                timeBlockedUntil: null
            });
        }
    } else {
        timeBlockMessage.style.display = 'none';
    }
}

// ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶°‡¶æ‡¶â‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
function startTimeBlockCountdown(duration) {
    // ‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶ï‡ßã‡¶® ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶≠‡¶æ‡¶≤ ‡¶ö‡¶≤‡¶Æ‡¶æ‡¶® ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶§‡¶æ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
    if (timeBlockInterval) {
        clearInterval(timeBlockInterval);
    }
    
    let timer = duration / 1000;
    
    const updateCountdown = () => {
        const hours = Math.floor(timer / 3600);
        const minutes = Math.floor((timer % 3600) / 60);
        const seconds = Math.floor(timer % 60);
        
        timeBlockCountdown.innerText = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        timer--;
        
        if (timer < 0) {
            clearInterval(timeBlockInterval);
            timeBlockMessage.style.display = 'none';
            if (!userData.isBlocked && !document.querySelector('.maintenance-mode')) {
                orderForm.classList.remove('form-disabled');
                submitBtn.disabled = false;
            }
        }
    };
    
    // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    updateCountdown();
    
    // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    timeBlockInterval = setInterval(updateCountdown, 1000);
}

// ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶â‡¶™‡¶≤‡¶¨‡ßç‡¶ß‡¶§‡¶æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
function updateServices(services) {
    const options = serviceSelect.querySelectorAll('option');
    options.forEach(option => {
        const service = option.value;
        if (service && services && services[service] !== undefined) {
            if (services[service]) {
                option.classList.remove('service-disabled');
                option.disabled = false;
            } else {
                option.classList.add('service-disabled');
                option.disabled = true;
            }
        }
    });
}

// ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
function updateAmounts(amounts) {
    if (amounts) {
        // ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶§‡ßá ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
        serviceSelect.addEventListener('change', function() {
            const service = this.value;
            const specialServices = ['followers', 'comments', 'shares'];
            
            // ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶á‡¶®‡ßç‡¶°‡¶ø‡¶ï‡ßá‡¶ü‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®/‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®
            if (specialServices.includes(service)) {
                specialServiceIndicator.style.display = 'block';
            } else {
                specialServiceIndicator.style.display = 'none';
            }
            
            if (service === 'likes' && amounts.likes) {
                amountInput.value = amounts.likes;
                amountInput.min = 1;
                amountInput.max = 1000;
                commentPreview.style.display = 'none';
            } else if (service === 'views' && amounts.views) {
                amountInput.value = amounts.views;
                amountInput.min = 1;
                amountInput.max = 5000;
                commentPreview.style.display = 'none';
            } else if (service === 'followers') {
                amountInput.value = Math.min(amounts.followers || 50, userData.specialServiceLimits?.followers || 50);
                amountInput.min = 1;
                amountInput.max = userData.specialServiceLimits?.followers || 50;
                commentPreview.style.display = 'none';
            } else if (service === 'comments') {
                amountInput.value = Math.min(amounts.comments || 50, userData.specialServiceLimits?.comments || 50);
                amountInput.min = 10;
                amountInput.max = userData.specialServiceLimits?.comments || 50;
                updateCommentPreview();
                commentPreview.style.display = 'block';
            } else if (service === 'shares') {
                amountInput.value = Math.min(amounts.shares || 50, userData.specialServiceLimits?.shares || 50);
                amountInput.min = 1;
                amountInput.max = userData.specialServiceLimits?.shares || 50;
                commentPreview.style.display = 'none';
            }
        });
    }
}

// ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
function updateCommentPreview() {
    const randomComment = randomComments[Math.floor(Math.random() * randomComments.length)];
    commentText.textContent = randomComment;
}

// ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶™‡¶Ü‡¶™ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
function showAdminMessage(message) {
    document.getElementById('popupMessage').textContent = message;
    adminPopup.style.display = 'flex';
    lastDisplayedMessage = message;
    
    // ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
    database.ref('users/' + userId).update({
        lastSeenMessage: message
    });
}

// ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶™‡¶Ü‡¶™ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
function closePopup() {
    adminPopup.style.display = 'none';
}

// ‡¶ï‡ßÅ‡¶≤‡¶°‡¶æ‡¶â‡¶® ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
function checkCooldown(lastOrderTime, cooldownMinutes) {
    if (lastOrderTime) {
        const lastOrder = new Date(lastOrderTime);
        const now = new Date();
        const diff = (lastOrder.getTime() + cooldownMinutes * 60 * 1000) - now.getTime();
        
        if (diff > 0) {
            startCountdown(diff);
            submitBtn.disabled = true;
        } else {
            countdownText.style.display = "none";
            if (!userData.isBlocked && !document.querySelector('.maintenance-mode')) {
                submitBtn.disabled = false;
            }
        }
    }
}

// ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶°‡¶æ‡¶â‡¶® ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
function startCountdown(duration) {
    countdownText.style.display = "block";
    
    // ‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶ï‡ßã‡¶® ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶≠‡¶æ‡¶≤ ‡¶ö‡¶≤‡¶Æ‡¶æ‡¶® ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶§‡¶æ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
    if (currentCountdownInterval) {
        clearInterval(currentCountdownInterval);
    }
    
    let timer = duration / 1000;
    
    const updateCountdown = () => {
        const minutes = Math.floor(timer / 60);
        const seconds = Math.floor(timer % 60);
        
        countdownText.innerText = `‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        timer--;
        
        if (timer < 0) {
            clearInterval(currentCountdownInterval);
            countdownText.style.display = "none";
            if (!userData.isBlocked && !document.querySelector('.maintenance-mode')) {
                submitBtn.disabled = false;
            }
        }
    };
    
    // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    updateCountdown();
    
    // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    currentCountdownInterval = setInterval(updateCountdown, 1000);
}

// ‡¶è‡¶≤‡¶æ‡¶∞‡ßç‡¶ü ‡¶∂‡ßã ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
function showAlert(message, type) {
    alertBox.textContent = message;
    alertBox.className = "alert";
    alertBox.classList.add(type);
}

// ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞
document.getElementById("orderForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    
    // ‡¶Æ‡ßá‡¶á‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶Æ‡ßã‡¶° ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
    const siteStatusRef = database.ref('siteStatus/maintenance');
    const maintenanceSnapshot = await siteStatusRef.once('value');
    if (maintenanceSnapshot.val() && maintenanceSnapshot.val().enabled) {
        showAlert("‚ùå ‡¶∏‡¶æ‡¶á‡¶ü‡ßá ‡¶∞‡¶ï‡ßç‡¶∑‡¶£‡¶æ‡¶¨‡ßá‡¶ï‡ßç‡¶∑‡¶£ ‡¶ö‡¶≤‡¶õ‡ßá! ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§", "error");
        return;
    }
    
    // ‡¶¨‡ßç‡¶≤‡¶ï‡¶ø‡¶Ç ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
    const blockingRef = database.ref('siteStatus/blocking');
    const blockingSnapshot = await blockingRef.once('value');
    if (blockingSnapshot.val() && blockingSnapshot.val().enabled) {
        showAlert("‚ùå ‡¶∏‡¶æ‡¶á‡¶ü‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶ö‡¶≤‡¶õ‡ßá! ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§", "error");
        return;
    }
    
    if (userData.isBlocked) {
        showAlert("‚ùå ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!", "error");
        return;
    }
    
    // ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
    if (userData.timeBlockedUntil) {
        const blockedUntil = new Date(userData.timeBlockedUntil);
        const now = new Date();
        if (blockedUntil > now) {
            showAlert("‚ùå ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶Æ‡¶Ø‡¶º‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!", "error");
            return;
        }
    }
    
    const url = videoInput.value.trim();
    const service = serviceSelect.value;
    let amount = parseInt(amountInput.value);
    
    // URL ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶®
    if (!url) {
        showAlert("‚ùå ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¶‡¶ø‡¶®!", "error");
        return;
    }
    
    // ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶®
    if (!service) {
        showAlert("‚ùå ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!", "error");
        return;
    }
    
    // ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
    if (userData.services && !userData.services[service]) {
        showAlert("‚ùå ‡¶è‡¶á ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏‡¶ü‡¶ø ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá unavailable!", "error");
        return;
    }
    
    // ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
    const specialServices = ['followers', 'comments', 'shares'];
    if (specialServices.includes(service)) {
        const specialLimitValue = userData.specialServiceLimit || 2;
        const specialUsedValue = userData.specialServiceUsed || 0;
        
        if (specialUsedValue >= specialLimitValue) {
            showAlert(`‚ùå ‡¶Ü‡¶™‡¶®‡¶ø ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏‡ßá‡¶∞ ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶Ö‡¶§‡¶ø‡¶ï‡ßç‡¶∞‡¶Æ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®! (${specialLimitValue} ‡¶¨‡¶æ‡¶∞)`, "error");
            return;
        }
    }
    
    // ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
    if (specialServices.includes(service)) {
        const limit = userData.specialServiceLimits?.[service] || 50;
        if (amount > limit) {
            showAlert(`‚ùå ${service} ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏‡ßá‡¶∞ ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶∏‡ßÄ‡¶Æ‡¶æ ${limit}!`, "error");
            return;
        }
    }
    
    // ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡¶ø‡¶®‡¶ø‡¶Æ‡¶æ‡¶Æ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
    if (service === 'comments' && amount < 10) {
        showAlert("‚ùå ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡ßß‡ß¶ ‡¶è‡¶∞ ‡¶ï‡¶Æ ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá ‡¶®‡¶æ!", "error");
        return;
    }
    
    // ‡¶≤‡¶æ‡¶á‡¶ï ‡¶è‡¶¨‡¶Ç ‡¶≠‡¶ø‡¶â ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶∏‡ßÄ‡¶Æ‡¶æ
    if (service === 'likes' && amount > 1000) {
        showAlert("‚ùå ‡¶≤‡¶æ‡¶á‡¶ï‡ßá‡¶∞ ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶∏‡ßÄ‡¶Æ‡¶æ 1000!", "error");
        return;
    }
    
    if (service === 'views' && amount > 5000) {
        showAlert("‚ùå ‡¶≠‡¶ø‡¶â‡ßü‡ßá‡¶∞ ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶∏‡ßÄ‡¶Æ‡¶æ 5000!", "error");
        return;
    }
    
    // ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
    loader.style.display = "block";
    progressBar.style.width = "0%";
    showAlert("‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...", "info");
    
    let width = 0;
    const interval = setInterval(async () => {
        width += 2;
        progressBar.style.width = width + "%";
        
        if (width >= 100) {
            clearInterval(interval);
            loader.style.display = "none";
            showAlert("‚úÖ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®!", "success");
            
            // ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
            const specialServices = ['followers', 'comments', 'shares'];
            const isSpecialService = specialServices.includes(service);
            
            // ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
            let newOrderCount;
            let newTotalOrders = (userData.totalOrders || 0) + 1;
            
            // ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶π‡¶≤‡ßá ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
            if (isSpecialService) {
                newOrderCount = 0;
                hasSentCompletionMessage = false; // ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶∂‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü
                
                // ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶®
                sendSpecialOrderToTelegram(service, amount, url);
            } else {
                newOrderCount = orderCount + 1;
                
                // ‡ß´‡¶ü‡¶ø ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶π‡¶≤‡ßá ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶®
                if (newOrderCount === 5) {
                    sendCompletionToTelegram();
                }
            }
            
            // Firebase ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
            const updates = {
                currentOrders: newOrderCount,
                totalOrders: newTotalOrders,
                lastOrderTime: new Date().toISOString()
            };
            
            // ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
            if (isSpecialService) {
                const newSpecialServiceUsed = (userData.specialServiceUsed || 0) + 1;
                updates.specialServiceUsed = newSpecialServiceUsed;
            }
            
            // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶π‡¶≤‡ßá ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶π‡¶≤‡ßá ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶≤‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®
            if (orderCount === 0 || isSpecialService) {
                updates.videoLink = url;
                updates.isLinkLocked = true;
            }
            
            database.ref('users/' + userId).update(updates);
            
            // ‡¶ï‡ßÅ‡¶≤‡¶°‡¶æ‡¶â‡¶® ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
            const cooldownTime = userData.cooldownTime || 10;
            startCountdown(cooldownTime * 60 * 1000);
            submitBtn.disabled = true;
            
            // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
            serviceSelect.selectedIndex = 0;
            commentPreview.style.display = 'none';
            specialServiceIndicator.style.display = 'none';
        }
    }, 100);
});

// ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¨‡¶æ‡¶ü‡¶®
resetLinkBtn.addEventListener("click", function() {
    if (orderCount >= 5) {
        database.ref('users/' + userId).update({
            currentOrders: 0,
            videoLink: '',
            isLinkLocked: false
        });
        
        // ‡¶ï‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶∂‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
        hasSentCompletionMessage = false;
        
        showAlert("‚úÖ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶®‡¶§‡ßÅ‡¶® ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶¶‡¶ø‡¶®‡•§", "success");
    }
});

// ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶¨‡¶æ‡¶ü‡¶®
settingsBtn.addEventListener("click", function() {
    alert("‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶æ‡¶∞: MR-MOMIN üîí\n‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®: ‡ß¨.‡ß¶\n‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø: " + userId + "\n‡¶∏‡¶∞‡ßç‡¶¨‡¶∏‡ßç‡¶¨‡¶§‡ßç‡¶¨ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§");
});

// URL ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞
videoInput.addEventListener("input", function() {
    const url = this.value.trim();
    if (url && !isLinkLocked && !savedUrl) {
        database.ref('users/' + userId).update({
            videoLink: url,
            isLinkLocked: true
        });
    }
});

// ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡¶≤‡ßá ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
serviceSelect.addEventListener('change', function() {
    const service = this.value;
    const amounts = userData.customAmounts || {};
    const limits = userData.specialServiceLimits || {};
    const specialServices = ['followers', 'comments', 'shares'];
    
    // ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶á‡¶®‡ßç‡¶°‡¶ø‡¶ï‡ßá‡¶ü‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®/‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®
    if (specialServices.includes(service)) {
        specialServiceIndicator.style.display = 'block';
    } else {
        specialServiceIndicator.style.display = 'none';
    }
    
    if (service === 'likes') {
        amountInput.value = amounts.likes || 100;
        amountInput.min = 1;
        amountInput.max = 1000;
        commentPreview.style.display = 'none';
    } else if (service === 'views') {
        amountInput.value = amounts.views || 500;
        amountInput.min = 1;
        amountInput.max = 5000;
        commentPreview.style.display = 'none';
    } else if (service === 'followers') {
        amountInput.value = Math.min(amounts.followers || 50, limits.followers || 50);
        amountInput.min = 1;
        amountInput.max = limits.followers || 50;
        commentPreview.style.display = 'none';
    } else if (service === 'comments') {
        amountInput.value = Math.min(amounts.comments || 50, limits.comments || 50);
        amountInput.min = 10;
        amountInput.max = limits.comments || 50;
        updateCommentPreview();
        commentPreview.style.display = 'block';
    } else if (service === 'shares') {
        amountInput.value = Math.min(amounts.shares || 50, limits.shares || 50);
        amountInput.min = 1;
        amountInput.max = limits.shares || 50;
        commentPreview.style.display = 'none';
    }
});

// ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡¶≤‡ßá ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
amountInput.addEventListener('input', function() {
    if (serviceSelect.value === 'comments') {
        updateCommentPreview();
    }
});
</script>
</body>
  </html>
